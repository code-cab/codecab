<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<!-- saved from url=(0073)http://docs.turbulenz.com/jslibrary_api/physics2d_collisionutils_api.html -->
<html xmlns="http://www.w3.org/1999/xhtml"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
    
    
    <title>18.6. The CollisionUtils Object — Turbulenz 0.28.0 documentation</title>
    
    <link rel="stylesheet" href="./18.6. The CollisionUtils Object — Turbulenz 0.28.0 documentation_files/sphinxdoc.css" type="text/css">
    <link rel="stylesheet" href="./18.6. The CollisionUtils Object — Turbulenz 0.28.0 documentation_files/pygments.css" type="text/css">
    
    <script type="text/javascript" async="" src="./18.6. The CollisionUtils Object — Turbulenz 0.28.0 documentation_files/ga.js.download"></script><script type="text/javascript">
      var DOCUMENTATION_OPTIONS = {
        URL_ROOT:    '../',
        VERSION:     '0.28.0',
        COLLAPSE_INDEX: false,
        FILE_SUFFIX: '.html',
        HAS_SOURCE:  true
      };
    </script>
    <script type="text/javascript" src="./18.6. The CollisionUtils Object — Turbulenz 0.28.0 documentation_files/jquery.js.download"></script>
    <script type="text/javascript" src="./18.6. The CollisionUtils Object — Turbulenz 0.28.0 documentation_files/underscore.js.download"></script>
    <script type="text/javascript" src="./18.6. The CollisionUtils Object — Turbulenz 0.28.0 documentation_files/doctools.js.download"></script>
    <link rel="top" title="Turbulenz 0.28.0 documentation" href="http://docs.turbulenz.com/index.html">
    <link rel="up" title="18. Low Level 2D Physics API" href="http://docs.turbulenz.com/jslibrary_api/physics2d_api.html">
    <link rel="next" title="18.7. The Constraint Object" href="http://docs.turbulenz.com/jslibrary_api/physics2d_constraint_api.html">
    <link rel="prev" title="18.4. The Broadphase Object" href="http://docs.turbulenz.com/jslibrary_api/broadphase_api.html">
 
<script type="text/javascript">
  var _gaq = _gaq || [];
  _gaq.push(['_setAccount', 'UA-10614584-10']);
  _gaq.push(['_trackPageview']);
  (function() {
    var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
    ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
    var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
  })();
</script>

  </head>
  <body>
    <div class="related">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="http://docs.turbulenz.com/genindex.html" title="General Index" accesskey="I">index</a></li>
        <li class="right">
          <a href="http://docs.turbulenz.com/jslibrary_api/physics2d_constraint_api.html" title="18.7. The Constraint Object" accesskey="N">next</a> |</li>
        <li class="right">
          <a href="http://docs.turbulenz.com/jslibrary_api/broadphase_api.html" title="18.4. The Broadphase Object" accesskey="P">previous</a> |</li>
        <li><a href="http://docs.turbulenz.com/index.html">Turbulenz 0.28.0 documentation</a> »</li>
          <li><a href="http://docs.turbulenz.com/jslibrary_api/physics2d_api.html" accesskey="U">18. Low Level 2D Physics API</a> »</li> 
      </ul>
    </div>
      <div class="sphinxsidebar">
        <div class="sphinxsidebarwrapper">
  <h3><a href="http://docs.turbulenz.com/index.html">Table Of Contents</a></h3>
  <ul>
<li><a class="reference internal" href="http://docs.turbulenz.com/jslibrary_api/physics2d_collisionutils_api.html#">18.6. The CollisionUtils Object</a><ul>
<li><a class="reference internal" href="http://docs.turbulenz.com/jslibrary_api/physics2d_collisionutils_api.html#constructor">18.6.1. Constructor</a></li>
<li><a class="reference internal" href="http://docs.turbulenz.com/jslibrary_api/physics2d_collisionutils_api.html#methods">18.6.2. Methods</a><ul>
<li><a class="reference internal" href="http://docs.turbulenz.com/jslibrary_api/physics2d_collisionutils_api.html#containspoint">18.6.2.1. <cite>containsPoint</cite></a></li>
<li><a class="reference internal" href="http://docs.turbulenz.com/jslibrary_api/physics2d_collisionutils_api.html#signeddistance">18.6.2.2. <cite>signedDistance</cite></a></li>
<li><a class="reference internal" href="http://docs.turbulenz.com/jslibrary_api/physics2d_collisionutils_api.html#intersects">18.6.2.3. <cite>intersects</cite></a></li>
<li><a class="reference internal" href="http://docs.turbulenz.com/jslibrary_api/physics2d_collisionutils_api.html#raytest">18.6.2.4. <cite>rayTest</cite></a></li>
<li><a class="reference internal" href="http://docs.turbulenz.com/jslibrary_api/physics2d_collisionutils_api.html#sweeptest">18.6.2.5. <cite>sweepTest</cite></a></li>
</ul>
</li>
</ul>
</li>
</ul>

  <h4>Previous topic</h4>
  <p class="topless"><a href="http://docs.turbulenz.com/jslibrary_api/broadphase_api.html" title="previous chapter">18.4. The Broadphase Object</a></p>
  <h4>Next topic</h4>
  <p class="topless"><a href="http://docs.turbulenz.com/jslibrary_api/physics2d_constraint_api.html" title="next chapter">18.7. The Constraint Object</a></p>
  <h3>This Page</h3>
  <ul class="this-page-menu">
    <li><a href="http://docs.turbulenz.com/_sources/jslibrary_api/physics2d_collisionutils_api.txt" rel="nofollow">Show Source</a></li>
  </ul>
<div id="searchbox" style="">
  <h3>Quick search</h3>
    <form class="search" action="http://docs.turbulenz.com/search.html" method="get">
      <input type="text" name="q">
      <input type="submit" value="Go">
      <input type="hidden" name="check_keywords" value="yes">
      <input type="hidden" name="area" value="default">
    </form>
    <p class="searchtip" style="font-size: 90%">
    Enter search terms or a module, class or function name.
    </p>
</div>
<script type="text/javascript">$('#searchbox').show(0);</script>
        </div>
      </div>

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body">
            
  <div class="section" id="the-collisionutils-object">
<span id="physics2d-collisionutils"></span><h1>18.6. The CollisionUtils Object<a class="headerlink" href="http://docs.turbulenz.com/jslibrary_api/physics2d_collisionutils_api.html#the-collisionutils-object" title="Permalink to this headline">¶</a></h1>
<p>The CollisionUtils object provides an interface to the Physics2D collision detection routines, this object can be constructed seperately and used without any physics.</p>
<div class="section" id="constructor">
<h2>18.6.1. Constructor<a class="headerlink" href="http://docs.turbulenz.com/jslibrary_api/physics2d_collisionutils_api.html#constructor" title="Permalink to this headline">¶</a></h2>
<p>A CollisionUtils object can be constructed with <a class="reference internal" href="http://docs.turbulenz.com/jslibrary_api/physics2ddevice_api.html#physics2ddevice-createcollisionutils"><em>Physics2DDevice.createCollisionUtils</em></a>.</p>
</div>
<div class="section" id="methods">
<h2>18.6.2. Methods<a class="headerlink" href="http://docs.turbulenz.com/jslibrary_api/physics2d_collisionutils_api.html#methods" title="Permalink to this headline">¶</a></h2>
<div class="section" id="containspoint">
<span id="index-1"></span><h3>18.6.2.1. <cite>containsPoint</cite><a class="headerlink" href="http://docs.turbulenz.com/jslibrary_api/physics2d_collisionutils_api.html#containspoint" title="Permalink to this headline">¶</a></h3>
<p><strong>Summary</strong></p>
<p>Determine if the given point in world coordinates is contained within the given <a class="reference internal" href="http://docs.turbulenz.com/jslibrary_api/physics2d_shape_api.html#physics2d-shape"><em>Shape</em></a>.</p>
<p><strong>Syntax</strong></p>
<div class="highlight-javascript"><div class="highlight"><pre><span class="kd">var</span> <span class="nx">result</span> <span class="o">=</span> <span class="nx">collisionUtils</span><span class="p">.</span><span class="nx">containsPoint</span><span class="p">(</span><span class="nx">shape</span><span class="p">,</span> <span class="nx">point</span><span class="p">);</span>
</pre></div>
</div>
<dl class="docutils">
<dt><tt class="docutils literal"><span class="pre">shape</span></tt></dt>
<dd><p class="first">The shape to test point containment.</p>
<p class="last">This shape must be assigned to a <a class="reference internal" href="http://docs.turbulenz.com/jslibrary_api/physics2d_body_api.html#physics2d-body"><em>RigidBody</em></a> object to define it’s position and rotation in world coordinates.</p>
</dd>
<dt><tt class="docutils literal"><span class="pre">point</span></tt></dt>
<dd>The point to test containment with.</dd>
</dl>
</div>
<div class="section" id="signeddistance">
<span id="index-2"></span><h3>18.6.2.2. <cite>signedDistance</cite><a class="headerlink" href="http://docs.turbulenz.com/jslibrary_api/physics2d_collisionutils_api.html#signeddistance" title="Permalink to this headline">¶</a></h3>
<p><strong>Summary</strong></p>
<p>Determine the signed distance between two <a class="reference internal" href="http://docs.turbulenz.com/jslibrary_api/physics2d_shape_api.html#physics2d-shape"><em>Shape</em></a> objects, together with the witness points and axis between them.</p>
<p><strong>Syntax</strong></p>
<div class="highlight-javascript"><div class="highlight"><pre><span class="kd">var</span> <span class="nx">witnessA</span> <span class="o">=</span> <span class="p">[];</span>
<span class="kd">var</span> <span class="nx">witnessB</span> <span class="o">=</span> <span class="p">[];</span>
<span class="kd">var</span> <span class="nx">axis</span> <span class="o">=</span> <span class="p">[];</span>

<span class="kd">var</span> <span class="nx">distance</span> <span class="o">=</span> <span class="nx">collisionUtils</span><span class="p">.</span><span class="nx">signedDistance</span><span class="p">(</span><span class="nx">shapeA</span><span class="p">,</span> <span class="nx">shapeB</span><span class="p">,</span> <span class="nx">witnessA</span><span class="p">,</span> <span class="nx">witnessB</span><span class="p">,</span> <span class="nx">axis</span><span class="p">);</span>
</pre></div>
</div>
<dl class="docutils">
<dt><tt class="docutils literal"><span class="pre">shapeA</span></tt></dt>
<dd><p class="first">The first shape in distance query.</p>
<p class="last">This shape must be assigned to a <a class="reference internal" href="http://docs.turbulenz.com/jslibrary_api/physics2d_body_api.html#physics2d-body"><em>RigidBody</em></a> object to define it’s position and rotation in world coordinates.</p>
</dd>
<dt><tt class="docutils literal"><span class="pre">shapeB</span></tt></dt>
<dd><p class="first">The second shape in distance query.</p>
<p class="last">This shape must be assigned to a <a class="reference internal" href="http://docs.turbulenz.com/jslibrary_api/physics2d_body_api.html#physics2d-body"><em>RigidBody</em></a> object to define it’s position and rotation in world coordinates.</p>
</dd>
<dt><tt class="docutils literal"><span class="pre">witnessA</span></tt></dt>
<dd>An array in which to store the witness point on the first shape in world coordinates.</dd>
<dt><tt class="docutils literal"><span class="pre">witnessB</span></tt></dt>
<dd>An array in which to store the witness point on the second shape in world coordinates.</dd>
<dt><tt class="docutils literal"><span class="pre">axis</span></tt></dt>
<dd>An array in which to store the axis between the two shapes in world coordinates. This axis will always be of unit length.</dd>
</dl>
<p>In the case that the two shapes are seperating (positive distance), the witness points will correspond to the closest points between the two shapes, and the axis corresponding to the seperating axis from <cite>shapeA</cite> to <cite>shapeB</cite>.</p>
<p>In the case that the two shapes are penetrating (negative distance), the witness points and axis will correspond to the MTV (Minimum translational vector) for the two shapes from <cite>shapeA</cite> to <cite>shapeB</cite>.</p>
</div>
<div class="section" id="intersects">
<span id="index-3"></span><h3>18.6.2.3. <cite>intersects</cite><a class="headerlink" href="http://docs.turbulenz.com/jslibrary_api/physics2d_collisionutils_api.html#intersects" title="Permalink to this headline">¶</a></h3>
<p><strong>Summary</strong></p>
<p>Determine if two <a class="reference internal" href="http://docs.turbulenz.com/jslibrary_api/physics2d_shape_api.html#physics2d-shape"><em>Shape</em></a> objects are intersecting.</p>
<p><strong>Syntax</strong></p>
<div class="highlight-javascript"><div class="highlight"><pre><span class="kd">var</span> <span class="nx">result</span> <span class="o">=</span> <span class="nx">collisionUtils</span><span class="p">.</span><span class="nx">intersects</span><span class="p">(</span><span class="nx">shapeA</span><span class="p">,</span> <span class="nx">shapeB</span><span class="p">);</span>
</pre></div>
</div>
<dl class="docutils">
<dt><tt class="docutils literal"><span class="pre">shapeA</span></tt></dt>
<dd><p class="first">The first shape to test intersection with.</p>
<p class="last">This shape must be assigned to a <a class="reference internal" href="http://docs.turbulenz.com/jslibrary_api/physics2d_body_api.html#physics2d-body"><em>RigidBody</em></a> object to define it’s position and rotation in world coordinates.</p>
</dd>
<dt><tt class="docutils literal"><span class="pre">shapeB</span></tt></dt>
<dd><p class="first">The second shape to test intersection with.</p>
<p class="last">This shape must be assigned to a <a class="reference internal" href="http://docs.turbulenz.com/jslibrary_api/physics2d_body_api.html#physics2d-body"><em>RigidBody</em></a> object to define it’s position and rotation in world coordinates.</p>
</dd>
</dl>
</div>
<div class="section" id="raytest">
<span id="index-4"></span><h3>18.6.2.4. <cite>rayTest</cite><a class="headerlink" href="http://docs.turbulenz.com/jslibrary_api/physics2d_collisionutils_api.html#raytest" title="Permalink to this headline">¶</a></h3>
<p><strong>Summary</strong></p>
<p>Determine the intersection of a given <a class="reference internal" href="http://docs.turbulenz.com/jslibrary_api/physics2d_shape_api.html#physics2d-shape"><em>Shape</em></a> and parametric ray.</p>
<p><strong>Syntax</strong></p>
<div class="highlight-javascript"><div class="highlight"><pre><span class="kd">var</span> <span class="nx">normal</span> <span class="o">=</span> <span class="p">[];</span>
<span class="kd">var</span> <span class="nx">ray</span> <span class="o">=</span> <span class="p">{</span>
    <span class="nx">origin</span> <span class="o">:</span> <span class="p">[</span><span class="o">-</span><span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">],</span>
    <span class="nx">direction</span> <span class="o">:</span> <span class="p">[</span><span class="mi">10</span><span class="p">,</span> <span class="mi">0</span><span class="p">],</span>
    <span class="nx">maxFactor</span> <span class="o">:</span> <span class="mi">1</span>
<span class="p">};</span>
<span class="kd">var</span> <span class="nx">ignoreInnerSurfaces</span> <span class="o">=</span> <span class="kc">false</span><span class="p">;</span>

<span class="kd">var</span> <span class="nx">factor</span> <span class="o">=</span> <span class="nx">collisionUtils</span><span class="p">.</span><span class="nx">rayTest</span><span class="p">(</span><span class="nx">shape</span><span class="p">,</span> <span class="nx">ray</span><span class="p">,</span> <span class="nx">normal</span><span class="p">,</span> <span class="nx">ignoreInnerSurfaces</span><span class="p">);</span>
</pre></div>
</div>
<dl class="docutils">
<dt><tt class="docutils literal"><span class="pre">shape</span></tt></dt>
<dd><p class="first">The shape to test ray intersection with.</p>
<p class="last">This shape must be assigned to a <a class="reference internal" href="http://docs.turbulenz.com/jslibrary_api/physics2d_body_api.html#physics2d-body"><em>RigidBody</em></a> object to define it’s position and rotation in world coordinates.</p>
</dd>
<dt><tt class="docutils literal"><span class="pre">ray</span></tt></dt>
<dd><p class="first">The parametric ray to test for intersection with.</p>
<p class="last">The ray will not be cast beyond its <cite>maxFactor</cite>.</p>
</dd>
<dt><tt class="docutils literal"><span class="pre">normal</span></tt></dt>
<dd>An array in which to store the normal at point of intersection.</dd>
<dt><tt class="docutils literal"><span class="pre">ignoreInnerSurfaces</span></tt> (Optional)</dt>
<dd><p class="first">When true, the ray will not be intersected against the inner surfaces of a shape.</p>
<p class="last">Default value is <cite>false</cite>.</p>
</dd>
</dl>
<p>This method returns either <cite>undefined</cite> indicating that no intersection occured, or the <cite>factor</cite> of the intersection with which one can compute the intersection point using:</p>
<div class="highlight-javascript"><div class="highlight"><pre><span class="nx">mathDevice</span><span class="p">.</span><span class="nx">v2AddScalarMul</span><span class="p">(</span><span class="nx">ray</span><span class="p">.</span><span class="nx">origin</span><span class="p">,</span> <span class="nx">ray</span><span class="p">.</span><span class="nx">direction</span><span class="p">,</span> <span class="nx">factor</span><span class="p">);</span>
</pre></div>
</div>
</div>
<div class="section" id="sweeptest">
<h3>18.6.2.5. <cite>sweepTest</cite><a class="headerlink" href="http://docs.turbulenz.com/jslibrary_api/physics2d_collisionutils_api.html#sweeptest" title="Permalink to this headline">¶</a></h3>
<p><strong>Summary</strong></p>
<p>Determine the time of impact between two <a class="reference internal" href="http://docs.turbulenz.com/jslibrary_api/physics2d_shape_api.html#physics2d-shape"><em>Shape</em></a> objects with point of impact and normal.</p>
<p><strong>Syntax</strong></p>
<div class="highlight-javascript"><div class="highlight"><pre><span class="kd">var</span> <span class="nx">point</span> <span class="o">=</span> <span class="p">[];</span>
<span class="kd">var</span> <span class="nx">normal</span> <span class="o">=</span> <span class="p">[];</span>

<span class="kd">var</span> <span class="nx">timeOfImpact</span> <span class="o">=</span> <span class="nx">collisionUtils</span><span class="p">.</span><span class="nx">sweepTest</span><span class="p">(</span><span class="nx">shapeA</span><span class="p">,</span> <span class="nx">shapeB</span><span class="p">,</span> <span class="nx">deltaTime</span><span class="p">,</span> <span class="nx">point</span><span class="p">,</span> <span class="nx">normal</span><span class="p">);</span>
</pre></div>
</div>
<dl class="docutils">
<dt><tt class="docutils literal"><span class="pre">shapeA</span></tt></dt>
<dd><p class="first">The first shape to be swept for time of impact.</p>
<p class="last">This shape must be assigned to a <a class="reference internal" href="http://docs.turbulenz.com/jslibrary_api/physics2d_body_api.html#physics2d-body"><em>RigidBody</em></a> object to define it’s position and rotation in world coordinates, with the body velocities used to define the sweep for this shape.</p>
</dd>
<dt><tt class="docutils literal"><span class="pre">shapeB</span></tt></dt>
<dd><p class="first">The second shape to be swept for time of impact.</p>
<p class="last">This shape must be assigned to a <a class="reference internal" href="http://docs.turbulenz.com/jslibrary_api/physics2d_body_api.html#physics2d-body"><em>RigidBody</em></a> object to define it’s position and rotation in world coordinates, with the body velocities used to define the sweep for this shape.</p>
</dd>
<dt><tt class="docutils literal"><span class="pre">deltaTime</span></tt></dt>
<dd><p class="first">The amount of time in seconds through which the shapes will be swept before returning with failure.</p>
<p class="last">This value should be strictly positive.</p>
</dd>
<dt><tt class="docutils literal"><span class="pre">point</span></tt></dt>
<dd>An array in which to store the collision point in world space.</dd>
<dt><tt class="docutils literal"><span class="pre">normal</span></tt></dt>
<dd>An array in which to store the collision normal in world space. This normal will always be of unit length and will point
from <cite>shapeA</cite> towards <cite>shapeB</cite>.</dd>
</dl>
<p>This method returns either <cite>undefined</cite> indicating that no collision occured in the given time frame, or the <cite>time of impact</cite> of the collision.</p>
</div>
</div>
</div>


          </div>
        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="related">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="http://docs.turbulenz.com/genindex.html" title="General Index">index</a></li>
        <li class="right">
          <a href="http://docs.turbulenz.com/jslibrary_api/physics2d_constraint_api.html" title="18.7. The Constraint Object">next</a> |</li>
        <li class="right">
          <a href="http://docs.turbulenz.com/jslibrary_api/broadphase_api.html" title="18.4. The Broadphase Object">previous</a> |</li>
        <li><a href="http://docs.turbulenz.com/index.html">Turbulenz 0.28.0 documentation</a> »</li>
          <li><a href="http://docs.turbulenz.com/jslibrary_api/physics2d_api.html">18. Low Level 2D Physics API</a> »</li> 
      </ul>
    </div>
    <div class="footer">
        © Copyright 2010-2014, Turbulenz Limited.
      Created using <a href="http://sphinx.pocoo.org/">Sphinx</a> 1.1.3.
    </div>
  
</body></html>